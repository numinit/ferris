goog.require('zx');

goog.require('zx.Visualizer');

(function(top) {
    var zx = top['ZXVisualize'];
    var base = '<%= ApplicationHelper.base_uri %>';
    var assets = '<%= asset_path "zx-worker.js" %>';

    if (zx._started) {
        return;
    }

    zx._started = true;
    zx._visualizer = new zx.Visualizer(top, base, 'div#container div.visualizer div.dataviz', function(msg) {
        console.log('visualizer: ' + msg);
    });
    zx._visualizer.run();

    zx._context = new zx.Context(top, base, assets, function(message) {
        console.log('context: ' + message);
    });
    zx._context.run();
})(this);

